<!DOCTYPE html>
<html>
    <head>
        <title>PicoModal Test Page</title>
        <script src="src/picoModal.js"></script>
    </head>
    <body>
        <p><a href="#" id="createFromString">Simple Create</a></p>
        <p><a href="#" id="createFromNode">Create From DOM Node</a></p>
        <p><a href="#" id="withoutClose">Without a close button</a></p>
        <p><a href="#" id="withoutShadowClose">Without shadow close</a></p>
        <p><a href="#" id="customStyles">Custom Styles</a></p>
        <p><a href="#" id="closeMethod">Close Method</a></p>
        <p><a href="#" id="closeEvent">Close Event</a></p>

        <div style="display: none">
            <div id="contentFromNode">
                This content was pulled from a dom node
            </div>
        </div>

        <script>
            function buildModal(id, options) {
                var modal;
                document.getElementById(id)
                    .addEventListener("click", function(e) {
                        e.preventDefault();
                        if ( !modal ) {
                            modal = typeof options === "function" ?
                                options() :
                                picoModal(options);
                        }
                        modal.show();
                    });
            }

            buildModal("createFromString",
                "Ah, the pitter patter of tiny feet in huge combat boots.");

            buildModal("createFromNode",
                document.getElementById("contentFromNode"));

            buildModal("withoutClose", {
                content: "Ah, the pitter patter of tiny feet in huge combat boots.",
                closeButton: false
            });

            buildModal("withoutShadowClose", {
                content: "Ah, the pitter patter of tiny feet in huge combat boots.",
                overlayClose: false
            });

            buildModal("customStyles", {
                content: "Ah, the pitter patter of tiny feet in huge combat boots.",
                overlayStyles: { backgroundColor: "#169", opacity: 0.6 },
                modalStyles: {
                    padding: "30px",
                    background: "#fff",
                    border: "3px solid #169"
                },
                closeHtml: "<span>Close</span>",
                closeStyles: {
                    position: "absolute", top: "-3px", right: "-3px",
                    background: "#fff", padding: "4px 8px", cursor: "pointer",
                    border: "3px solid #169", fontSize: "10pt"
                }
            });

            buildModal("closeMethod", function() {
                return picoModal(
                    "<p>Ah, the pitter patter of tiny feet in huge combat boots.<p>"
                    + "<p><a href='#' class='dismiss'>Dismiss</a></p>"
                ).afterCreate(function(modal){
                    modal.modalElem().getElementsByClassName("dismiss")[0]
                        .addEventListener('click', modal.close);
                });
            });

            buildModal("closeEvent", function() {
                return picoModal(
                    "Ah, the pitter patter of tiny feet in huge combat boots."
                ).afterClose(function(modal){
                    alert(modal.modalElem().innerText);
                });
            });

        </script>
    </body>
</html>
